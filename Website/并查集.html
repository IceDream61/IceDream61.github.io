<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<title>并查集</title>
<link rel="stylesheet" href="../Resources/GitHub2.css">
<link rel="stylesheet" href="../Resources/prism.css">
</head>

<body>

<h1>并查集</h1>

<pre>
<code class="language-cpp">
#include&#160;&#60;stdio.h&#62;
#define&#160;maxn&#160;100
typedef&#160;int&#160;bool;

int&#160;N,&#160;M;
int&#160;up[maxn+1];

FILE&#160;*in;

int&#160;root(int&#160;i)
{
&#160;&#160;&#160;&#160;//&#160;version&#160;2
&#160;&#160;&#160;&#160;return&#160;(up[i]==i)?i:(up[i]=root(up[i]));

&#160;&#160;&#160;&#160;//&#160;version&#160;1
&#160;&#160;&#160;&#160;//&#160;if(up[i]==i)
&#160;&#160;&#160;&#160;//&#160;&#160;&#160;&#160;&#160;return&#160;i;
&#160;&#160;&#160;&#160;//&#160;else&#160;{
&#160;&#160;&#160;&#160;//&#160;&#160;&#160;&#160;&#160;up[i]&#160;=&#160;root(up[i]);
&#160;&#160;&#160;&#160;//&#160;&#160;&#160;&#160;&#160;return&#160;up[i];
&#160;&#160;&#160;&#160;//&#160;}
}
bool&#160;same(int&#160;i,&#160;int&#160;j)&#160;{&#160;return&#160;root(i)&#160;==&#160;root(j);&#160;}
void&#160;merge(int&#160;i,&#160;int&#160;j)
{
&#160;&#160;&#160;&#160;//&#160;version&#160;2
&#160;&#160;&#160;&#160;if((i=root(i))!=(j=root(j)))&#160;up[i]=j;

&#160;&#160;&#160;&#160;//&#160;version&#160;1
&#160;&#160;&#160;&#160;//&#160;i&#160;=&#160;root(i);
&#160;&#160;&#160;&#160;//&#160;j&#160;=&#160;root(j);
&#160;&#160;&#160;&#160;//&#160;if(i!=j)&#160;up[i]=j;
}

void&#160;Input()&#160;{
&#160;&#160;&#160;&#160;int&#160;i;
&#160;&#160;&#160;&#160;in&#160;=&#160;fopen(&#34;0.in&#34;,&#160;&#34;r&#34;);
&#160;&#160;&#160;&#160;fscanf(in,&#160;&#34;%d%d&#34;,&#160;&#38;N,&#160;&#38;M);
}

void&#160;Print()&#160;{
&#160;&#160;&#160;&#160;int&#160;i;
&#160;&#160;&#160;&#160;for(i=1;&#160;i&#60;=N;&#160;++i)&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;printf(&#34;up[%d]=%d\n&#34;,&#160;i,&#160;up[i]);
&#160;&#160;&#160;&#160;}
}

void&#160;Init()&#160;{
&#160;&#160;&#160;&#160;int&#160;i;
&#160;&#160;&#160;&#160;for(i=1;&#160;i&#60;=N;&#160;++i)&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;up[i]&#160;=&#160;i;
&#160;&#160;&#160;&#160;}
}

void&#160;Work()&#160;{
&#160;&#160;&#160;&#160;int&#160;i,&#160;x,&#160;y;
&#160;&#160;&#160;&#160;char&#160;op[10];
&#160;&#160;&#160;&#160;for(i=1;&#160;i&#60;=M;&#160;++i)&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;fscanf(in,&#160;&#34;%s%d%d&#34;,&#160;op,&#160;&#38;x,&#160;&#38;y);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if(op[0]==&#39;m&#39;)&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;merge(x,&#160;y);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}&#160;else&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;printf(&#34;%s\n&#34;,&#160;same(x,&#160;y)?&#34;yes&#34;:&#34;no&#34;);
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
//&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Print();
&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;fclose(in);
}

int&#160;main()&#160;{
&#160;&#160;&#160;&#160;Input();
&#160;&#160;&#160;&#160;Init();
&#160;&#160;&#160;&#160;Work();
&#160;&#160;&#160;&#160;return&#160;0;
}


</code>
</pre>

<script type="text/javascript" src="../Resources/mathjax.js"></script>
<script type="text/x-mathjax-config">
if (typeof MathJaxListener !== 'undefined') {
  MathJax.Hub.Register.StartupHook('End', function () {
    MathJaxListener.invokeCallbackForKey_('End');
  });
}
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script src="../Resources/prism.js"></script>
</body>

</html>
